開発メモ
--------------------------

# 辞書ヒットの寛容化と語句のレンダリング

「お姉さんが笑ってた」という辞書の文字列に対して「お兄さんが笑ってた」でもヒットできるようにするには、「お姉さん」「お兄さん」などが似た単語であることを知る必要がある。
そこで、一般会話の大きめのコーパスを用意し、そこに含まれる単語をword2vecでベクトル化してそのベクトルが似ているものをk-meansによるクラスタリングでまとめ、クラスタごとにidを割り振る。単語をそれが属するクラスタidに変換する辞書が生成できる。
これを利用して入力文字列、出力文字列を変換する。ここでword2vecでベクトル化する対象からstopwordを除去しておくと、得られたクラスタidはユーザのトピックとしてそれなりに重要な単語とすることができるため、入力文字列中でクラスタidに置き換えられた単語をキャッシュに覚えておき、出力文字列中の同idをキャッシュからコピーする。それによって

「お姉さんは笑ってたよ」→「お姉さんが楽しそうだったんですね」
などのようにユーザ発言に対応してアレンジした発言を返すことができる。なお、キャッシュになかった単語はもとの単語に戻す必要があるため、出力文字列中ではクラスタidともとの単語の療法を保持しておく。
内部表現として、例えば
\t12,お兄さん\tのようにする
